(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{58:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(1),s=c(16),r=c.n(s),o=c(11),i=c(12),l=c(9),j=c(86),d=c(10),b=c(73),h=c(60),O=c(61),u=c(62),x=c(63),m=c(64),p=c(65),f=c(66),g=c(67),y=c(87),v=c(68),k=c(69),w=c(70),C=c(88),S=c(71),N=c(72),I=c(27),E=Object(I.b)({name:"user",initialState:{isLogged:!1,userDetails:{}},reducers:{setLogin:function(e,t){e.isLogged=t.payload,!1===t.payload&&(e.userDetails={})},setUserDetails:function(e,t){console.log("in setUserDetails",t.payload),e.userDetails=t.payload}}}),P=E.actions,B=P.setLogin,L=P.setUserDetails,D=function(e){return e.user.isLogged},T=E.reducer;function q(e){var t=e.book,c=t.title,s=t.ISBN,r=t.author,l=t.category,j=t.cover,b=t.stock,I=t.idx,E=Object(o.c)(D),P=Object(a.useState)(!1),B=Object(d.a)(P,2),L=B[0],T=B[1],q=Object(a.useState)(E),z=Object(d.a)(q,2),R=z[0],A=z[1],F=Object(a.useState)(1),J=Object(d.a)(F,2),M=J[0],U=J[1],G=Object(a.useState)(void 0),Q=Object(d.a)(G,2),H=Q[0],W=Q[1];Object(a.useEffect)((function(){A(E)}),[E]);var Y=function(){T(!L),W(void 0),U(1)};return Object(n.jsx)(h.a,{className:"mb-3 mt-3",children:Object(n.jsxs)(O.a,{style:{width:"180px",backgroundColor:"#fff",opacity:".9",color:"black"},children:[Object(n.jsx)(u.a,{id:"PopoverFocus".concat(I),type:"button",style:{margin:"0",padding:"0"},children:Object(n.jsx)(x.a,{top:!0,style:{width:"100%",height:"240px"},src:j||"https://static01.nyt.com/images/2019/12/22/books/review/22BestCovers-Dorfman-02/22BestCovers-Dorfman-02-mobileMasterAt3x.jpg",alt:"Card image cap"})}),Object(n.jsxs)(m.a,{style:{padding:"5px 10px"},children:[Object(n.jsx)(p.a,{tag:"h5",children:c}),Object(n.jsxs)(f.a,{tag:"h6",className:"mb-2 text-muted",children:["Author: ",r]}),Object(n.jsxs)(g.a,{children:["ISBN: ",s,Object(n.jsx)("br",{}),"Category: ",l,Object(n.jsx)("br",{}),"Stock: ",b]})]}),Object(n.jsx)(u.a,{color:"success",style:{width:"100%"},onClick:Y,children:"Add to Cart"}),Object(n.jsxs)(y.a,{isOpen:L,toggle:Y,children:[R?Object(n.jsx)(v.a,{style:{backgroundColor:"#333",opacity:".9",color:"#fff"},children:c}):null,Object(n.jsx)(k.a,{style:{backgroundColor:"#333",opacity:".9",color:"#fff"},children:R?Object(n.jsxs)(n.Fragment,{children:["Set number of books",Object(n.jsxs)(w.a,{style:{width:"120px"},children:[Object(n.jsx)(C.a,{addonType:"prepend",children:Object(n.jsx)(u.a,{onClick:function(){1!==M&&(U(Number(M)-1),W(void 0))},children:"-"})}),Object(n.jsx)(S.a,{readOnly:!0,placeholder:"Set number of books",type:"number",value:M,min:"1"}),Object(n.jsx)(C.a,{addonType:"append",children:Object(n.jsx)(u.a,{onClick:function(){5===M?W("Cannot add more than 5 books"):M===b?W("Out of stock!"):(U(Number(M)+1),W(void 0))},children:"+"})})]}),H?Object(n.jsx)("p",{style:{marginTop:"10px",color:"red"},children:H}):null]}):"You must login first to add the books in the cart."}),Object(n.jsxs)(N.a,{style:{backgroundColor:"#333",opacity:".9"},children:[R?Object(n.jsx)(u.a,{color:"primary",onClick:function(){console.log("add to Cart");var e=localStorage.getItem("token");fetch("http://localhost:8080/api/books/addtocart",{method:"POST",body:JSON.stringify({ISBN:s,quantity:M}),headers:{"Content-Type":"application/json","auth-token":e},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.ok)return Y();W(e.message)})).catch((function(e){return console.log(e)}))},children:"Add"}):Object(n.jsxs)(i.b,{to:"/login",children:[Object(n.jsx)(u.a,{color:"primary",onClick:Y,children:"Login"})," "]}),Object(n.jsx)(u.a,{color:"secondary",onClick:Y,children:"Cancel"})]})]})]})})}var z=c(39),R=c(74),A=c(75),F=c(76),J=c(77),M=c(78),U=c(79),G=c(6),Q=c.n(G);function H(){var e=Object(o.c)(D),t=Object(l.f)(),c=Object(a.useState)("1"),s=Object(d.a)(c,2),r=s[0],i=s[1],j=function(e){r!==e&&i(e)};Object(a.useEffect)((function(){e||t.push("/")}),[e,t]);var O=Object(a.useState)([]),x=Object(d.a)(O,2),m=x[0],p=x[1],f=localStorage.getItem("token");return Object(a.useEffect)((function(){e&&fetch("http://localhost:8080/api/user/cart",{method:"GET",headers:{"auth-token":f},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return p(Object(z.a)(e.books))}))}),[]),Object(n.jsx)(b.a,{style:{width:"75%",margin:"20px auto"},children:Object(n.jsxs)(h.a,{children:[Object(n.jsxs)(R.a,{tabs:!0,style:{zIndex:"1"},children:[Object(n.jsx)(A.a,{children:Object(n.jsx)(F.a,{style:{cursor:"pointer",color:"white",backgroundColor:"gray"},className:Q()({active:"1"===r}),onClick:function(){j("1")},children:"Cart"})}),Object(n.jsx)(A.a,{children:Object(n.jsx)(F.a,{style:{cursor:"pointer",color:"white",backgroundColor:"gray"},className:Q()({active:"2"===r}),onClick:function(){j("2")},children:"Issued Books"})})]}),Object(n.jsxs)(J.a,{activeTab:r,children:[Object(n.jsx)(M.a,{tabId:"1",children:Object(n.jsx)(b.a,{children:Object(n.jsx)(h.a,{children:Object(n.jsxs)(U.a,{dark:!0,style:{zIndex:"1",opacity:".8"},children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"#"}),Object(n.jsx)("th",{children:"Book Name"}),Object(n.jsx)("th",{children:"ISBN"}),Object(n.jsx)("th",{children:"Quantity"})]})}),Object(n.jsxs)("tbody",{children:[m.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:t+1}),Object(n.jsx)("td",{children:e.title}),Object(n.jsx)("td",{children:e.ISBN}),Object(n.jsx)("td",{children:e.quantity})]},t)})),0!==m.length?Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"4",align:"center",children:Object(n.jsx)(u.a,{color:"success",children:"Issue Books"})})}):null]})]})})})}),Object(n.jsx)(M.a,{tabId:"2",children:Object(n.jsx)(b.a,{children:Object(n.jsx)(h.a,{children:Object(n.jsxs)(U.a,{dark:!0,style:{zIndex:"1",opacity:".8"},children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"#"}),Object(n.jsx)("th",{children:"Book Name"}),Object(n.jsx)("th",{children:"ISBN"}),Object(n.jsx)("th",{children:"Quantity"}),Object(n.jsx)("th",{children:"Return Date"})]})}),Object(n.jsxs)("tbody",{children:[m.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:t+1}),Object(n.jsx)("td",{children:e.title}),Object(n.jsx)("td",{children:e.ISBN}),Object(n.jsx)("td",{children:e.quantity}),Object(n.jsx)("td",{children:e.quantity})]},t)})),0!==m.length?Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"5",align:"center",children:Object(n.jsx)(u.a,{color:"success",children:"Return Books"})})}):null]})]})})})})]})]})})}function W(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),c=t[0],s=t[1];return Object(a.useEffect)((function(){fetch("http://localhost:8080/api/books").then((function(e){return e.json()})).then((function(e){return s(e)})).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(b.a,{children:c.map((function(e,t){return Object(n.jsx)(q,{book:e,idx:t},t)}))})})}var Y=c(20),K=c(21),V=c(80),X=c(81),Z=c(82),$=function(e){var t=Object(o.c)(D),c=Object(l.f)();Object(a.useEffect)((function(){t&&c.push("/")}),[t,c]);var s=Object(o.b)(),r=Object(a.useState)(void 0),j=Object(d.a)(r,2),x=j[0],f=j[1],g=Object(a.useState)({email:"",password:""}),y=Object(d.a)(g,2),v=y[0],k=y[1],w=function(e){k((function(t){return Object(K.a)(Object(K.a)({},t),{},Object(Y.a)({},e.target.name,e.target.value))}))},C=function(e){e.preventDefault(),""!==v.email.trim()&&""!==v.password.trim()?fetch("http://localhost:8080/api/user/login",{method:"POST",body:JSON.stringify(v),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.auth?(localStorage.setItem("token",e.token),console.log("in if",e),s(B(!0)),console.log("after dispatch setLogin"),s(L(e.details))):f(e.err)})).catch((function(e){return f(e.message)})):f("Please fill out the required fields")};return Object(n.jsx)(b.a,{className:"mt-5",children:Object(n.jsx)(h.a,{md:"5",className:"ml-auto ",children:Object(n.jsx)(O.a,{inverse:!0,style:{backgroundColor:"#333",opacity:".9"},children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)(p.a,{tag:"h5",children:"Log In"}),Object(n.jsxs)(V.a,{onSubmit:C,children:[Object(n.jsxs)(X.a,{children:[Object(n.jsx)(Z.a,{for:"exampleEmail",children:"Email"}),Object(n.jsx)(S.a,{type:"email",name:"email",placeholder:"Enter Email",onChange:w,value:v.email})]}),Object(n.jsxs)(X.a,{className:"position-relative",children:[Object(n.jsx)(Z.a,{for:"examplePassword",children:"Password"}),Object(n.jsx)(S.a,{type:"password",name:"password",placeholder:"Enter Password",onChange:w,value:v.password})]}),x?Object(n.jsx)("h6",{style:{color:"red"},children:x}):null,Object(n.jsx)(X.a,{className:"pt-2",children:Object(n.jsx)(u.a,{color:"primary",className:"w-100",type:"submit",onClick:C,children:"Log In"})})]}),Object(n.jsxs)("h5",{className:"mt-4",children:["Don't have an account? ",Object(n.jsx)(i.b,{to:"/register",children:"Register here."})]})]})})})})};function _(){var e=Object(l.f)(),t=Object(a.useState)(void 0),c=Object(d.a)(t,2),s=c[0],r=c[1],o=Object(a.useState)({name:"",email:"",password:"",confirmPassword:""}),j=Object(d.a)(o,2),x=j[0],f=j[1],g=function(e){f((function(t){return Object(K.a)(Object(K.a)({},t),{},Object(Y.a)({},e.target.name,e.target.value))}))},y=function(t){t.preventDefault(),""!==x.name&&""!==x.email&&""!==x.password&&""!==x.confirmPassword?x.password===x.confirmPassword?fetch("http://localhost:8080/api/user/signup",{method:"POST",body:JSON.stringify({name:x.name,email:x.email,password:x.password}),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.ok?{success:!0}:e.json()})).then((function(t){console.log(t),t.success?(console.log("in success",t),e.push("/login")):r(t.err)})).catch((function(e){return r(e.message)})):r("Confirm password mismatch"):r("Please fill out the required fields")};return Object(n.jsx)(b.a,{className:"mt-4",children:Object(n.jsx)(h.a,{md:"5",className:"ml-auto ",children:Object(n.jsx)(O.a,{inverse:!0,style:{backgroundColor:"#333",opacity:".9"},children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)(p.a,{tag:"h5",children:"Register"}),Object(n.jsxs)(V.a,{onSubmit:y,children:[Object(n.jsxs)(X.a,{children:[Object(n.jsx)(Z.a,{for:"name",children:"Name"}),Object(n.jsx)(S.a,{type:"text",name:"name",placeholder:"Enter Name",onChange:g,value:x.name})]}),Object(n.jsxs)(X.a,{children:[Object(n.jsx)(Z.a,{for:"email",children:"Email"}),Object(n.jsx)(S.a,{type:"email",name:"email",placeholder:"Enter Email",onChange:g,value:x.email})]}),Object(n.jsxs)(X.a,{children:[Object(n.jsx)(Z.a,{for:"password",children:"Password"}),Object(n.jsx)(S.a,{type:"password",name:"password",placeholder:"Enter Password",onChange:g,value:x.password})]}),Object(n.jsxs)(X.a,{children:[Object(n.jsx)(Z.a,{for:"confirmPassword",children:"Confirm Password"}),Object(n.jsx)(S.a,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",onChange:g,value:x.confirmPassword})]}),s?Object(n.jsx)("h6",{style:{color:"red"},children:s}):null,Object(n.jsx)(X.a,{children:Object(n.jsx)(u.a,{color:"primary",className:"w-100",onClick:y,type:"submit",children:"Register"})})]}),Object(n.jsxs)("h5",{className:"mt-4",children:["Already have an account? ",Object(n.jsx)(i.b,{to:"/login",children:"Login here."})]})]})})})})}var ee=c(83),te=c(84),ce=c(85),ne=function(e){var t=Object(l.f)(),c=Object(o.c)(D),s=Object(o.b)();console.log(c);var r=Object(a.useState)(c),j=Object(d.a)(r,2),O=j[0],u=j[1],x=Object(a.useState)(!1),m=Object(d.a)(x,2),p=m[0],f=m[1];Object(a.useEffect)((function(){u(c)}),[c]);return Object(n.jsx)(b.a,{style:{position:"sticky",top:0,zIndex:2,fontSize:"1.5rem",backgroundColor:"#333",opacity:".7",marginBottom:"10px"},children:Object(n.jsx)(h.a,{children:Object(n.jsxs)(ee.a,{color:"transparent",dark:!0,expand:"md",children:[Object(n.jsx)(i.b,{to:"/",style:{fontFamily:"Pacifico, cursive"},className:"navbar-brand",children:"Library Management System"}),Object(n.jsx)(te.a,{onClick:function(){return f(!p)}}),Object(n.jsx)(ce.a,{isOpen:p,navbar:!0,children:O?Object(n.jsxs)(R.a,{className:"ml-auto",navbar:!0,children:[Object(n.jsx)(i.b,{to:"/cart",className:"nav-link",children:Object(n.jsx)(A.a,{children:"Cart"})}),Object(n.jsx)(F.a,{style:{cursor:"pointer"},onClick:function(){localStorage.removeItem("token"),s(B(!1)),t.push("/login")},className:"nav-link",children:Object(n.jsx)(A.a,{children:"Logout"})})]}):Object(n.jsxs)(R.a,{className:"ml-auto",navbar:!0,children:[Object(n.jsx)(i.b,{to:"/login",className:"nav-link",children:Object(n.jsx)(A.a,{children:"Login"})}),Object(n.jsx)(i.b,{to:"/register",className:"nav-link",children:Object(n.jsx)(A.a,{children:"Register"})})]})})]})})})},ae=c.p+"static/media/1.c5627629.webm",se=c.p+"static/media/2.a8673cea.webm",re=c.p+"static/media/3.410980d0.webm";function oe(){var e=[ae,se,re],t=e.length,c=e[parseInt(Math.random()*t)];return Object(n.jsx)("video",{autoPlay:!0,muted:!0,style:{pointerEvents:"none",position:"fixed",right:0,bottom:0,minWidth:"100%",minHeight:"100%",zIndex:0},children:Object(n.jsx)("source",{src:c,type:"video/mp4"})})}function ie(){var e=Object(o.b)();return Object(a.useEffect)((function(){var t=localStorage.getItem("token");fetch("http://localhost:8080/api/user/details",{method:"GET",headers:{"auth-token":t},credentials:"include"}).then((function(e){return e.json()})).then((function(t){t.auth&&e(B(!0))})).catch((function(e){return console.log(e)}))})),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(i.a,{children:Object(n.jsxs)(j.a,{fluid:!0,children:[Object(n.jsx)(oe,{}),Object(n.jsx)(ne,{}),Object(n.jsx)(j.a,{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/register",children:Object(n.jsx)(_,{})}),Object(n.jsx)(l.a,{path:"/login",children:Object(n.jsx)($,{})}),Object(n.jsx)(l.a,{path:"/cart",children:Object(n.jsx)(H,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(W,{})})]})})]})})})}var le=function(){return Object(n.jsx)(ie,{})},je=(c(57),c(58),Object(I.a)({reducer:{user:T}}));r.a.render(Object(n.jsx)(o.a,{store:je,children:Object(n.jsx)(le,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.dc33c45b.chunk.js.map